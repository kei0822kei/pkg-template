deploy:
  provider: pages
  public_repo: kei0822kei/pkg-template
  target_branch : master
  skip_cleanup: true
  keep_history: true
  verbose : true
  on:
    branch: gh-pages

env:
  global:
  - secure: DXZ0NuzAPmNMy87C/DvUExhOr1JTvJcMwd+XpoIEvN07qkE3882DqOgItzAyBIGbrAluRhSFGjYN43mBVJS95svS05/J0Liv82Y6rnAekujeN3b2jJqkmjlSp17OTqQLBnksBQ2IotZIe5feEnF0nN1kwidoHvai11F6LBz6ABaEA/K3+PSicZv3m3sybeKej/4GM0DnPunhICD2Z86XuBtxY4SOypUGBX/+jMF12K4otga4LAxDl+6xCgIp5/2K67ynSW4lSiO858Den8OCUWoDLFD9pB/FYB6teOc0omW6iJLKPRu0aG9F1wVu277Q5VS/daCDKW6m2tgv7lp4WL5VVVYhAhv56KeA2zeDUr+gOR5S64ssCbvs9nQCqL/rnrTjjk7qOlxUtfqScKHVETx8cJw4uIKm9yRjpx1MkCR20bJwiglt5sAn1fzaUs7wv+T5OmB4Zx7aOU8sbpjx/0SyGuPSOkqCeZRcbzXmyj8VxM9Us6Ru4fdet+xlCaPdXff/fmGyl2xGrtumU4bvcXrdv09ynpACiegKwIYBu+51gK5JYhfvjScEDJ0XFGgTS9K11yukLCKMPj2RbaFS6IPy5/s3/zG9TlFhJQR/8NUSwxRYS4zVmUGU1jRdoxR/iUwHGW5sflW+cERCRCYsh+1g4NebQ+zBSqGwXRmlLus=

branches:
  only:
  - gh-pages

language: python - "3.6"

# before_install will simply setup a conda enviroment for installing python packages, if you
# have project dependencies it's usually recommended to go this route
# before_install:
#     # - wget http://repo.continuum.io/miniconda/Miniconda-latest-Linux-x86_64.sh -O miniconda.sh
#     - wget https://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh -O miniconda.sh
#     - chmod +x miniconda.sh
#     - "./miniconda.sh -b"
#     - export PATH=/home/travis/miniconda2/bin:$PATH
#     - conda update --yes conda
#       # - sudo rm -rf /dev/shm
#     - sudo ln -s /run/shm /dev/shm
before_install:
  - wget http://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh -O $HOME/miniconda3.sh
  - chmod +x $HOME/miniconda3.sh
  - "$HOME/miniconda3.sh -b;"
  - export PATH=/home/travis/miniconda3/bin:$PATH
  - export PYTHONPATH=/home/travis/build/kei0822kei/pkg-template:$PYTHONPATH
  - conda update --yes -n base -c defaults conda

install:
    - conda install --yes python="3.6" sphinx
    - pip install --user travis-sphinx
    - pip install -e "/home/travis/build/kei0822kei/pkg-template[docs]"

script:
    - if [ "$TRAVIS_BRANCH" == "gh-pages" ] ; then travis-sphinx build ; fi

after_success:
    - if [ "$TRAVIS_BRANCH" == "gh-pages" ] ; then travis-sphinx deploy ; fi
